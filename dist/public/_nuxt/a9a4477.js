(window.webpackJsonp=window.webpackJsonp||[]).push([[57,3],{432:function(t,e,n){"use strict";n.r(e);n(9);var r={props:{deletePlaceholder:{type:Function,default:null,required:!0}},data:function(){return{isClosed:!0,onDelete:!1}},methods:{deleteCommand:function(){var t=this;this.deletePlaceholder&&(this.onDelete=!0,this.deletePlaceholder().then((function(){t.isClosed=!0})).finally((function(){t.onDelete=!1})))}}},c=n(6),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contents"},[t.isClosed?n("div",{staticClass:"hidden lg:flex flex-col px-2 mx-2 cursor-pointer action-link",on:{click:function(e){e.preventDefault(),t.isClosed=!1}}},[t._m(0)]):n("div",{staticClass:"flex border-2 border-gray-200 w-auto absolute bg-white items-center space-x-8 p-2 right-0 pl-8"},[n("p",{staticClass:"text-lg"},[t._v("\n      Êtes-vous sûr(e) ?\n    ")]),t._v(" "),n("button",{staticClass:"w-auto border border-transparent py-2 text-sm px-4 leading-none rounded font-medium bg-white hover:bg-gray-100 border-gray-200",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.isClosed=!0}}},[n("span",[t._v("Finalement, non")])]),t._v(" "),n("button",{staticClass:"relative w-40 border border-transparent py-2 text-sm px-4 leading-none rounded font-medium text-white bg-red-500 hover:bg-red-700 disabled:bg-red-200",attrs:{type:"button",disabled:!t.deletePlaceholder},on:{click:function(e){return e.preventDefault(),t.deleteCommand.apply(null,arguments)}}},[n("span",{staticClass:"relative w-8"},[t._v("\n        Oui, supprimer\n      ")]),t._v(" "),t.onDelete?n("loader",{staticClass:"absolute top-1/2 right-1 transform -translate-y-1/2"}):t._e()],1),t._v(" "),n("div",{staticClass:"flex flex-col px-2 mx-2 cursor-pointer text-gray-300",on:{click:function(e){e.preventDefault(),t.isClosed=!0}}},[t._m(1)])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon"},[e("i",{staticClass:"far fa-trash"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon"},[e("i",{staticClass:"far fa-times fa-lg"})])}],!1,null,"f2470552",null);e.default=component.exports;installComponents(component,{Loader:n(57).default})},444:function(t,e,n){(function(t){function n(t,e){for(var n=0,i=t.length-1;i>=0;i--){var r=t[i];"."===r?t.splice(i,1):".."===r?(t.splice(i,1),n++):n&&(t.splice(i,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function filter(t,e){if(t.filter)return t.filter(e);for(var n=[],i=0;i<t.length;i++)e(t[i],i,t)&&n.push(t[i]);return n}e.resolve=function(){for(var e="",r=!1,i=arguments.length-1;i>=-1&&!r;i--){var path=i>=0?arguments[i]:t.cwd();if("string"!=typeof path)throw new TypeError("Arguments to path.resolve must be strings");path&&(e=path+"/"+e,r="/"===path.charAt(0))}return(r?"/":"")+(e=n(filter(e.split("/"),(function(p){return!!p})),!r).join("/"))||"."},e.normalize=function(path){var t=e.isAbsolute(path),c="/"===r(path,-1);return(path=n(filter(path.split("/"),(function(p){return!!p})),!t).join("/"))||t||(path="."),path&&c&&(path+="/"),(t?"/":"")+path},e.isAbsolute=function(path){return"/"===path.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(filter(t,(function(p,t){if("string"!=typeof p)throw new TypeError("Arguments to path.join must be strings");return p})).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var c=r(t.split("/")),l=r(n.split("/")),o=Math.min(c.length,l.length),f=o,i=0;i<o;i++)if(c[i]!==l[i]){f=i;break}var d=[];for(i=f;i<c.length;i++)d.push("..");return(d=d.concat(l.slice(f))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(path){if("string"!=typeof path&&(path+=""),0===path.length)return".";for(var code=path.charCodeAt(0),t=47===code,e=-1,n=!0,i=path.length-1;i>=1;--i)if(47===(code=path.charCodeAt(i))){if(!n){e=i;break}}else n=!1;return-1===e?t?"/":".":t&&1===e?"/":path.slice(0,e)},e.basename=function(path,t){var e=function(path){"string"!=typeof path&&(path+="");var i,t=0,e=-1,n=!0;for(i=path.length-1;i>=0;--i)if(47===path.charCodeAt(i)){if(!n){t=i+1;break}}else-1===e&&(n=!1,e=i+1);return-1===e?"":path.slice(t,e)}(path);return t&&e.substr(-1*t.length)===t&&(e=e.substr(0,e.length-t.length)),e},e.extname=function(path){"string"!=typeof path&&(path+="");for(var t=-1,e=0,n=-1,r=!0,c=0,i=path.length-1;i>=0;--i){var code=path.charCodeAt(i);if(47!==code)-1===n&&(r=!1,n=i+1),46===code?-1===t?t=i:1!==c&&(c=1):-1!==t&&(c=-1);else if(!r){e=i+1;break}}return-1===t||-1===n||0===c||1===c&&t===n-1&&t===e+1?"":path.slice(t,n)};var r="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n(102))},448:function(t,e,n){"use strict";function r(t){var e,n,r,l=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);l--;){if(n&&null!=(e=t[n]))return e.call(t);if(r&&null!=(e=t[r]))return new c(e.call(t));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function c(s){function t(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then((function(t){return{value:t,done:e}}))}return c=function(s){this.s=s,this.n=s.next},c.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new c(s)}n.d(e,"a",(function(){return r}))},471:function(t,e,n){var content=n(524);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(27).default)("5fd9ff76",content,!0,{sourceMap:!1})},523:function(t,e,n){"use strict";n(471)},524:function(t,e,n){var r=n(26)((function(i){return i[1]}));r.push([t.i,"/*purgecss start ignore*/\n.appart .action-link{\n  opacity:0\n}\n.appart:hover .action-link{\n  opacity:1\n}\n\n/*purgecss end ignore*/",""]),r.locals={},t.exports=r},580:function(t,e,n){"use strict";n.r(e);n(23),n(21),n(29),n(17),n(30);var r=n(10),c=n(7),l=n(448),o=(n(56),n(9),n(20),n(46),n(169),n(69),n(28),n(444)),f=n.n(o),d=n(24);function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var h={layout:"dashboard",middleware:function(t){var e=t.redirect;0!==t.$auth.user.userType&&e({name:"dashboard-appartements"})},asyncData:function(t){return Object(c.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$api,(n=t.store).getters["appartment/appartments"].length){e.next=4;break}return e.next=4,n.dispatch("appartment/loadAppartments");case 4:if(n.getters["account/accounts"].length){e.next=7;break}return e.next=7,n.dispatch("account/loadAccounts");case 7:return e.abrupt("return",{});case 8:case"end":return e.stop()}}),e)})))()},data:function(){return{title:"Utilisateurs",isListLayout:!0,appartmentToEdit:{},isFilterTrayOpened:!1,selectedAccounts:[],contracts:[],locations:[]}},head:function(){return{title:this.title}},computed:m(m({},Object(d.c)({accounts:"account/accounts",appartments:"appartment/appartments"})),{},{connectedUser:function(){return this.$auth.user},publication:function(){var t=this;return function(e){return t.publications.find((function(t){return t.id===e}))}},reservation:function(){var t=this;return function(e){return t.reservations.find((function(t){return t.id===e}))}},visit:function(){var t=this;return function(e){return t.visits.find((function(t){return t.id===e}))}},appartment:function(){var t=this;return function(e){return t.appartments.find((function(t){return t.id===e}))}},appartmentType:function(){var t=this;return function(e){return t.appartmentTypes.find((function(t){return t.id===e}))}},user:function(){var t=this;return function(e){return t.users.find((function(t){return t.id===e}))}},contract:function(){var t=this;return function(e){return t.contracts.find((function(t){return t.id===e}))}},appartVisits:function(){var t=this;return function(e){return t.visits.filter((function(t){return t.appartment===e}))}}}),methods:m(m({},Object(d.b)({loadAccounts:"account/loadAccounts"})),{},{toDetails:function(t){this.$router.push({path:"/dashboard/accounts/"+t.id})},setToEdition:function(t){this.accountToEdit=t},deleteUser:function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var r,c,o,d,v,m,h,x,_,y;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$api.accountService.delete({variables:{accountId:t.id}});case 3:r=!1,c=!1,n.prev=5,d=Object(l.a)(["main","first","second","third","fourth"]);case 7:return n.next=9,d.next();case 9:if(!(r=!(v=n.sent).done)){n.next=21;break}if(m=v.value,!(h=t["".concat(m,"Img")])){n.next=18;break}return x=h.split("?")[0],_=f.a.basename(x),y="accounts/".concat(t.id,"/").concat(_),n.next=18,e.$api.firebaseStorageService.delete({filePath:y});case 18:r=!1,n.next=7;break;case 21:n.next=27;break;case 23:n.prev=23,n.t0=n.catch(5),c=!0,o=n.t0;case 27:if(n.prev=27,n.prev=28,!r||null==d.return){n.next=32;break}return n.next=32,d.return();case 32:if(n.prev=32,!c){n.next=35;break}throw o;case 35:return n.finish(32);case 36:return n.finish(27);case 37:return n.next=39,e.loadAccounts();case 39:n.next=43;break;case 41:n.prev=41,n.t1=n.catch(0);case 43:case"end":return n.stop()}}),n,null,[[0,41],[5,23,27,37],[28,,32,36]])})))()}})},x=(n(523),n(6)),component=Object(x.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex-grow px-6 pt-2 main__content w-full"},[n("div",{staticClass:"relative flex pt-3 pb-0 border-t border-b border-gray-300 justify-between space-x-4"},[n("div",{staticClass:"w-full relative"},[n("input",{staticClass:"h-12 px-10 mt-1 mb-4 block w-full border-gray-200 focus:border-blue-75 bg-gray-100 focus:bg-blue-75 focus:ring-0 placeholder-gray-600 focus:placeholder-blue-380",class:!0===t.isFilterTrayOpened?"rounded-t-md":"rounded-md",attrs:{id:"",type:"text",placeholder:"Recherche"}}),t._v(" "),n("a",{staticClass:"flex items-center h-12 px-3 mt-1 bg-white border border-gray-200 absolute top-0 right-0",class:!0===t.isFilterTrayOpened?"rounded-tr-md":"rounded-r-md",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.isFilterTrayOpened=!t.isFilterTrayOpened}}},[n("span",{staticClass:"ml-3 text-sm font-medium hidden md:visible"},[t._v("Filtres")]),t._v(" "),t._m(0)]),t._v(" "),t._m(1)]),t._v(" "),n("div",{staticClass:"grid grid-cols-2 divide-x-2 divide-gray-300 w-auto"},[n("a",{staticClass:"flex items-center h-12 px-3 mt-1 hover:bg-blue-75 justify-end",class:t.isListLayout?"text-blue-730":"text-gray-400",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.isListLayout=!0}}},[t._m(2)]),t._v(" "),n("a",{staticClass:"flex items-center h-12 px-3 mt-1 hover:bg-blue-75",class:t.isListLayout?"text-gray-400":"text-blue-730",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.isListLayout=!1}}},[t._m(3)])])]),t._v(" "),0===t.accounts.length?n("div",{staticClass:"flex flex-col w-full h-4/5 items-center justify-center"},[n("h1",{staticClass:"text-3xl font-bold"},[t._v("\n      0 compte trouvé\n    ")]),t._v(" "),n("br"),t._v(" "),t._m(4)]):n("div",[t.isListLayout?n("div",{staticClass:"flex flex-col w-full table__container"},[t._m(5),t._v(" "),n("div",{staticClass:"overflow-auto custom__scroll py-4"},t._l(t.accounts,(function(e,r){return n("div",{key:e.id,staticClass:"appart flex flex-shrink-0 py-1 text-sm items-center hover:bg-sky-50 cursor-pointer relative",class:r%2!=0?"bg-gray-100":""},[n("div",{staticClass:"flex flex-col w-min px-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedAccounts,expression:"selectedAccounts"}],staticClass:"appearance-none w-6 h-6 border border-gray-300 rounded-sm outline-none cursor-pointer checked:bg-blue-400",attrs:{type:"checkbox",name:"email"},domProps:{value:e,checked:Array.isArray(t.selectedAccounts)?t._i(t.selectedAccounts,e)>-1:t.selectedAccounts},on:{change:function(n){var r=t.selectedAccounts,c=n.target,l=!!c.checked;if(Array.isArray(r)){var o=e,f=t._i(r,o);c.checked?f<0&&(t.selectedAccounts=r.concat([o])):f>-1&&(t.selectedAccounts=r.slice(0,f).concat(r.slice(f+1)))}else t.selectedAccounts=l}}})]),t._v(" "),n("div",{staticClass:"flex flex-col mx-1 lg:mx-2",on:{click:function(n){return n.preventDefault(),t.toDetails(e)}}},[n("span",{staticClass:"rounded-full h-12 w-12"},[n("img",{staticClass:"rounded-full h-12 w-12 m-0",attrs:{src:e.picture,alt:""}})])]),t._v(" "),n("div",{staticClass:"flex flex-col w-60 lg:w-64 px-2 mx-1 lg:mx-2",on:{click:function(n){return n.preventDefault(),t.toDetails(e)}}},[n("p",[t._v("\n              "+t._s(e.firstname+" "+e.lastname)+"\n            ")])]),t._v(" "),n("div",{staticClass:"hidden lg:flex  flex-col w-64 px-2 mx-1 lg:mx-2",on:{click:function(n){return n.preventDefault(),t.toDetails(e)}}},[n("span",[t._v(t._s(e.email))])]),t._v(" "),n("div",{staticClass:"hidden lg:flex  flex-col w-32 px-2 mx-1 lg:mx-2",on:{click:function(n){return n.preventDefault(),t.toDetails(e)}}},[e.user?n("span",[t._v(t._s(e.user.userType))]):t._e()]),t._v(" "),n("div",{staticClass:"hidden lg:flex  flex-col w-24 px-2 mx-1 lg:mx-2",on:{click:function(n){return n.preventDefault(),t.toDetails(e)}}},[e.user&&e.user.email===t.connectedUser.email?n("span",[t._v("Connecté")]):t._e()]),t._v(" "),n("div",{staticClass:"hidden lg:flex  flex-col w-20 px-2 mx-1 lg:mx-2",on:{click:function(n){return n.preventDefault(),t.toDetails(e)}}},[n("span")]),t._v(" "),n("div",{staticClass:"hidden lg:flex flex-col px-2 mx-1 lg:mx-2 cursor-pointer action-link",on:{click:function(n){return n.preventDefault(),t.setToEdition(e)}}},[t._m(6,!0)]),t._v(" "),n("DeletePrompt",{attrs:{"delete-placeholder":function(){return t.deleteUser(e)}}})],1)})),0),t._v(" "),t._m(7)]):n("div",{staticClass:"grid grid-cols-1 lg:grid-cols-3"},t._l(t.appartments,(function(e){return n("div",{key:e.id,staticClass:"card flex flex-col bg-transparent rounded-lg pb-8 lg:mr-8 mb-8 border border-gray-100 hover:p-8 hover:shadow-lg",on:{click:function(n){return n.preventDefault(),t.toDetails(e)}}},[n("img",{attrs:{src:e.mainImg,alt:""}}),t._v(" "),n("div",{staticClass:"flex flex-col items-start mt-4 px-8 justify-center lg:justify-start"},[n("h4",{staticClass:"text-lg font-medium mb-2"},[t._v("\n            "+t._s(e.type)+"\n          ")]),t._v(" "),n("div",{staticClass:"flex items-center"},[t._m(8,!0),t._v(" "),n("label",{staticClass:"text-md",attrs:{for:"#"}},[t._v(t._s(e.location))])])])])})),0)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon ml-3"},[e("i",{staticClass:"far fa-chevron-down fa-sm"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon w-8 block absolute left-2 top-5 h-9"},[e("i",{staticClass:"far fa-search mx-auto block"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon w-6 block"},[e("i",{staticClass:"far fa-th-list mx-auto block fa-lg"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon w-6 block"},[e("i",{staticClass:"far fa-th-large mx-auto block fa-lg"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"text-gray-400"},[t._v('\n      Cliquez sur le bouton " + Nv. utilisateur" en haut à gauche pour\n      '),n("span",{staticClass:"font-extrabold"},[t._v("rajouter un utilisateur")]),t._v(".\n    ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-shrink-0 bg-blue-75 py-1 font-medium bg-gray-100"},[n("div",{staticClass:"flex items-center w-min h-10 px-2"},[n("input",{staticClass:"appearance-none w-6 h-6 border border-gray-300 rounded-sm outline-none cursor-pointer checked:bg-blue-400",attrs:{type:"checkbox",name:"email"}})]),t._v(" "),n("div",{staticClass:"flex items-center w-64 h-10 px-4 text-xs mr-2 ml-16"},[n("span",[t._v("NOM COMPLET")])]),t._v(" "),n("div",{staticClass:"hidden lg:flex items-center w-64 h-10 px-4 text-xs mx-1 lg:mx-2"},[n("span",[t._v("EMAIL")])]),t._v(" "),n("div",{staticClass:"hidden lg:flex items-center w-32 h-10 px-2 text-xs mx-1 lg:mx-2"},[n("span",[t._v("TYPE")])]),t._v(" "),n("div",{staticClass:"hidden lg:flex items-center w-20 h-10 px-2 text-xs mx-1 lg:mx-2"},[n("span",[t._v("STATUS")])]),t._v(" "),n("div",{staticClass:"hidden lg:flex items-center w-20 h-10 px-2 text-xs mx-1 lg:mx-2"},[n("span",[t._v("DERNIÈRE CONNEX.")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon"},[e("i",{staticClass:"far fa-edit"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-shrink-0 bg-blue-75 py-1 font-medium bg-gray-100"},[n("div",{staticClass:"flex items-center w-min h-10 px-2"},[n("input",{staticClass:"appearance-none w-6 h-6 border border-gray-300 rounded-sm outline-none cursor-pointer checked:bg-blue-400",attrs:{type:"checkbox",name:"email"}})]),t._v(" "),n("div",{staticClass:"flex items-center w-64 h-10 px-4 text-xs mr-2 ml-16"},[n("span",[t._v("NOM COMPLET")])]),t._v(" "),n("div",{staticClass:"hidden lg:flex items-center w-40 h-10 px-4 text-xs mx-1 lg:mx-2"},[n("span",[t._v("EMAIL")])]),t._v(" "),n("div",{staticClass:"hidden lg:flex items-center w-32 h-10 px-2 text-xs mx-1 lg:mx-2"},[n("span",[t._v("TYPE")])]),t._v(" "),n("div",{staticClass:"hidden lg:flex items-center w-20 h-10 px-2 text-xs mx-1 lg:mx-2"},[n("span",[t._v("STATUS")])]),t._v(" "),n("div",{staticClass:"hidden lg:flex items-center w-20 h-10 px-2 text-xs mx-1 lg:mx-2"},[n("span",[t._v("DERNIÈRE CONNEX.")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon mr-4 text-sky-450"},[e("i",{staticClass:"fas fa-map-marker-alt"})])}],!1,null,null,null);e.default=component.exports;installComponents(component,{DeletePrompt:n(432).default})}}]);