(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{531:function(t,e,r){"use strict";r.r(e);r(24),r(22),r(30),r(17),r(31);var n=r(7),o=r(72),l=r(10);r(29),r(33),r(57),r(9),r(20);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={props:{visit:{type:Object,required:!0},isMinified:{type:Boolean,default:!1},appartmentsProp:{type:Array,required:!0},loadVisitsFunc:{type:Function,required:!0},appartmentTypes:{type:Array,required:!0}},data:function(){return{selectedType:"",visitToEdit:d({},this.visit),visitorInfos:d({},this.visit.visitorInfos),typeSelectIsOpen:!1,currentStep:"first",isDismissed:!0,contracts:[],appartments:Object(o.a)(this.appartmentsProp),locations:[],selectedAppart:"",onUpdated:!1}},computed:{routeName:function(){return this.$nuxt.$route.name},appartment:function(){var t=this;return function(e){return t.appartments.find((function(t){return t.id===e}))}},appartmentType:function(){var t=this;return function(e){return t.appartmentTypes.find((function(t){return t.id===e}))}},user:function(){var t=this;return function(e){return t.users.find((function(t){return t.id===e}))}},contract:function(){var t=this;return function(e){return t.contracts.find((function(t){return t.id===e}))}},typeAppartments:function(){var t=this;return function(e){return t.appartments.filter((function(t){return t.appartmentType===e}))}}},watch:{selectedType:function(t){""!==t&&(this.appartments=this.appartments.filter((function(e){return e.appartmentType===t.id})))},visit:function(t){null!==t&&(this.visitToEdit=d({},t),this.visitorInfos=d({},t.visitorInfos),this.isDismissed=!1)}},mounted:function(){this.visitToEdit=d({},this.visit),this.visitInfos=d({},this.visit.visitorInfos)},methods:{resetVisitorData:function(){this.visitToEdit={visitorInfos:{}},this.isDismissed=!0,this.currentStep="first"},editVisit:function(){var t=this;this.onUpdated=!0,this.visitToEdit.appartment=this.visitToEdit.appartment.id,this.$api.visitService.update({variables:{visitId:this.visitToEdit.id,data:d(d({},this.visitToEdit),{},{visitorInfos:d({},this.visitorInfos)})}}).then((function(e){t.currentStep="congrats"})).then(Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("visit/loadVisits");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).catch((function(e){t.errorToshow=e.message})).finally((function(){t.onUpdated=!1}))}}},f=r(6),component=Object(f.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"contents"},[r("div",{staticClass:"flex items-center justify-center bg-black bg-opacity-75 h-screen w-screen absolute top-0 left-0 z-50",class:!0===t.isDismissed?"hidden":""},[r("div",{staticClass:"relative bg-white dark:bg-gray-800 overflow-hidden rounded-md shadow-btn-shadow mx-auto h-full lg:h-5/6",staticStyle:{width:"584px"}},[r("div",{staticClass:"text-start w-full p-4 sm:px-6 lg:p-8 z-20 relative"},[r("div",{staticClass:"flex items-center justify-between"},[r("h4",{staticClass:"text-2xl font-medium mb-8 text-sky-550"},[t._v("\n            Modifier la demande de visite\n          ")]),t._v(" "),r("button",{staticClass:"ml-auto hover:text-blue-730 p-4 absolute top-2 right-2",on:{click:function(e){return e.preventDefault(),t.resetVisitorData.apply(null,arguments)}}},[r("svg",{staticClass:"w-6 h-6",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"}},[r("path",{attrs:{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"}})])])]),t._v(" "),r("form",{staticClass:"pt-4 grid grid-cols-1 divide-y divide-gray-300",attrs:{action:"#"}},["first"===t.currentStep?r("div",{staticClass:"relative"},[r("p",{staticClass:"text-base mt-4 text-gray-400"},[t._v("\n              Veuillez sélectionner un appartement à visiter\n            ")]),t._v(" "),r("div",{staticClass:"relative inline-block w-full text-gray-700"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.visitToEdit.appartment,expression:"visitToEdit.appartment"}],staticClass:"w-full h-12 md:h-16 my-4 pl-3 pr-6 text-base placeholder-gray-600 border rounded-lg appearance-none focus:shadow-outline",attrs:{placeholder:"Regular input"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.visitToEdit,"appartment",e.target.multiple?r:r[0])}}},t._l(t.appartments,(function(e){return r("option",{key:e.id,domProps:{value:e.id}},[r("span",[t._v(t._s(t.appartmentType(e.appartmentType)&&t.appartmentType(e.appartmentType).label))]),t._v(" "),r("span",{staticClass:"text-gray-400"},[t._v(t._s(e.bedrooms+" Chambres - "+e.livingrooms+" Salons"))])])})),0)]),t._v(" "),r("div",{staticClass:"flex space-x-8"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.visitorInfos.firstname,expression:"visitorInfos.firstname",modifiers:{trim:!0}}],staticClass:"h-12 md:h-16 px-8 mt-1 my-4 block w-1/2 border-gray-320 focus:border-sky-450 rounded-md bg-gray-100 focus:bg-white focus:ring-0 placeholder-gray-600 focus:placeholder-blue-380",attrs:{type:"text",placeholder:"Nom"},domProps:{value:t.visitorInfos.firstname},on:{input:function(e){e.target.composing||t.$set(t.visitorInfos,"firstname",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.visitorInfos.lastname,expression:"visitorInfos.lastname",modifiers:{trim:!0}}],staticClass:"h-12 md:h-16 px-8 mt-1 my-4 block w-1/2 border-gray-320 focus:border-sky-450 rounded-md bg-gray-100 focus:bg-white focus:ring-0 placeholder-gray-600 focus:placeholder-blue-380",attrs:{type:"text",placeholder:"Prénom(s)"},domProps:{value:t.visitorInfos.lastname},on:{input:function(e){e.target.composing||t.$set(t.visitorInfos,"lastname",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),r("div",{staticClass:"flex space-x-8"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.visitorInfos.phone,expression:"visitorInfos.phone",modifiers:{trim:!0}}],staticClass:"h-12 md:h-16 px-8 mt-4 my-4 block w-1/2 border-gray-320 focus:border-sky-450 rounded-md bg-gray-100 focus:bg-white focus:ring-0 placeholder-gray-600 focus:placeholder-blue-380",attrs:{type:"text",placeholder:"Téléphone"},domProps:{value:t.visitorInfos.phone},on:{input:function(e){e.target.composing||t.$set(t.visitorInfos,"phone",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.visitorInfos.email,expression:"visitorInfos.email",modifiers:{trim:!0}}],staticClass:"h-12 md:h-16 px-8 mt-4 my-4 block w-1/2 border-gray-320 focus:border-sky-450 rounded-md bg-gray-100 focus:bg-white focus:ring-0 placeholder-gray-600 focus:placeholder-blue-380",attrs:{type:"email",placeholder:"Email"},domProps:{value:t.visitorInfos.email},on:{input:function(e){e.target.composing||t.$set(t.visitorInfos,"email",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),r("div",{staticClass:"flex space-x-8"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.visitToEdit.date,expression:"visitToEdit.date"}],staticClass:"h-12 md:h-16 px-8 mt-4 my-4 block w-1/2 border-gray-320 focus:border-sky-450 rounded-md bg-gray-100 focus:bg-white focus:ring-0 placeholder-gray-600 focus:placeholder-blue-380",attrs:{type:"text",placeholder:"Date"},domProps:{value:t.visitToEdit.date},on:{input:function(e){e.target.composing||t.$set(t.visitToEdit,"date",e.target.value)}}}),t._v(" "),r("input",{staticClass:"h-12 md:h-16 px-8 mt-4 my-4 block w-1/2 border-gray-320 focus:border-sky-450 rounded-md bg-gray-100 focus:bg-white focus:ring-0 placeholder-gray-600 focus:placeholder-blue-380",attrs:{type:"text",placeholder:"Heure"}})])]):t._e(),t._v(" "),"congrats"===t.currentStep?r("div",{staticClass:"congrats h-4/5 flex justify-center items-center"},[t._m(0)]):t._e()])]),t._v(" "),"congrats"!==t.currentStep?r("div",{staticClass:"footer p-8 flex justify-between absolute w-full bg-white z-20 bottom-0"},[r("button",{staticClass:"w-1/2 py-4 text-lg px-10 leading-none border border-blue-990 font-medium rounded-md text-blue-990 hover:bg-gray-100 mr-4 mt-8",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.resetVisitorData.apply(null,arguments)}}},[t._v("\n          Annuler\n        ")]),t._v(" "),r("button",{staticClass:"relative w-1/2 shadow-btn-shadow border border-transparent py-4 text-lg px-10 leading-none rounded font-medium mt-8 text-white bg-sky-550 hover:bg-blue-920",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.editVisit.apply(null,arguments)}}},[t._v("\n          Enregistrer\n          "),t.onUpdated?r("loader",{staticClass:"absolute top-1/2 right-2 transform -translate-y-1/2"}):t._e()],1)]):r("div",{staticClass:"footer p-8 flex justify-between absolute w-full bg-white z-20 bottom-0"},[r("button",{staticClass:"w-full py-4 text-sm px-8 leading-none border border-blue-990 font-medium rounded-md text-blue-990 hover:bg-gray-100 mr-4",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.resetVisitorData.apply(null,arguments)}}},[r("span",[t._v("Fermer")])])])])])])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"w-full px-16"},[r("img",{staticClass:"success-img mx-auto",attrs:{src:"/assets/images/success.svg",alt:"Logo Long Gontché"}}),t._v(" "),r("p",{staticClass:"text-lg lg:text-3xl -mt-8 lg:mt-12 text-blue-920 text-center"},[t._v("\n                Appartement\n              ")]),t._v(" "),r("p",{staticClass:"lg:text-xl mt-2 lg:mt-4 text-blue-920 text-center"},[t._v("\n                mise à jour avec succès\n              ")])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{Loader:r(58).default})}}]);