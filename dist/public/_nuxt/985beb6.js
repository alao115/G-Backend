(window.webpackJsonp=window.webpackJsonp||[]).push([[55,3,5],{468:function(t,e,n){"use strict";n.r(e);n(9);var r={props:{deletePlaceholder:{type:Function,default:null,required:!0}},data:function(){return{isClosed:!0,onDelete:!1}},methods:{deleteCommand:function(){var t=this;this.deletePlaceholder&&(this.onDelete=!0,this.deletePlaceholder().then((function(){t.isClosed=!0})).finally((function(){t.onDelete=!1})))}}},o=n(6),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contents"},[t.isClosed?n("div",{staticClass:"hidden lg:flex flex-col px-2 mx-2 cursor-pointer action-link",on:{click:function(e){e.preventDefault(),t.isClosed=!1}}},[t._m(0)]):n("div",{staticClass:"flex border-2 border-gray-200 w-auto absolute bg-white items-center space-x-8 p-2 right-0 pl-8"},[n("p",{staticClass:"text-lg"},[t._v("\n      Êtes-vous sûr(e) ?\n    ")]),t._v(" "),n("button",{staticClass:"w-auto border border-transparent py-2 text-sm px-4 leading-none rounded font-medium bg-white hover:bg-gray-100 border-gray-200",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.isClosed=!0}}},[n("span",[t._v("Finalement, non")])]),t._v(" "),n("button",{staticClass:"relative w-40 border border-transparent py-2 text-sm px-4 leading-none rounded font-medium text-white bg-red-500 hover:bg-red-700 disabled:bg-red-200",attrs:{type:"button",disabled:!t.deletePlaceholder},on:{click:function(e){return e.preventDefault(),t.deleteCommand.apply(null,arguments)}}},[n("span",{staticClass:"relative w-8"},[t._v("\n        Oui, supprimer\n      ")]),t._v(" "),t.onDelete?n("loader",{staticClass:"absolute top-1/2 right-1 transform -translate-y-1/2"}):t._e()],1),t._v(" "),n("div",{staticClass:"flex flex-col px-2 mx-2 cursor-pointer text-gray-300",on:{click:function(e){e.preventDefault(),t.isClosed=!0}}},[t._m(1)])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon"},[e("i",{staticClass:"far fa-trash"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon"},[e("i",{staticClass:"far fa-times fa-lg"})])}],!1,null,"f2470552",null);e.default=component.exports;installComponents(component,{Loader:n(58).default})},506:function(t,e,n){var content=n(558);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(28).default)("2ccd30a7",content,!0,{sourceMap:!1})},530:function(t,e,n){"use strict";n.r(e);n(24),n(22),n(20),n(30),n(17),n(31);var r=n(7),o=n(10);n(29),n(57),n(9);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={props:{appartmentType:{type:Object,default:function(){return{}}},isMinified:{type:Boolean,default:!1},loadAppartmentTypesFunc:{type:Function,required:!0}},data:function(){return{appartTypeToEdit:l({},this.appartmentType),currentStep:"first",isDismissed:!0,locations:[],onUpdated:!1}},computed:{publication:function(){var t=this;return function(e){return t.publications.find((function(t){return t.id===e}))}},reservation:function(){var t=this;return function(e){return t.reservations.find((function(t){return t.id===e}))}},visit:function(){var t=this;return function(e){return t.visits.find((function(t){return t.id===e}))}},appartment:function(){var t=this;return function(e){return t.appartments.find((function(t){return t.id===e}))}},paymentFrequency:function(){var t=this;return function(e){return t.paymentFrequencies.find((function(t){return t.id===e}))}},user:function(){var t=this;return function(e){return t.users.find((function(t){return t.id===e}))}},contract:function(){var t=this;return function(e){return t.contracts.find((function(t){return t.id===e}))}}},watch:{appartmentType:function(t){null!==t&&(this.appartTypeToEdit=l({},t),this.isDismissed=!1)}},created:function(){this.appartmentTypeToEdit=l({},this.appartmentType)},methods:{toDetails:function(t){this.$router.push({path:"/dashboard/appartements/"+t.id})},editAppartType:function(){var t=this;this.onUpdated=!0,this.$api.appartmentTypeService.update({variables:{appartmentTypeId:this.appartTypeToEdit.id,data:this.appartTypeToEdit}}).then((function(e){t.appartTypeToEdit={},t.currentStep="congrats"})).then(Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadAppartmentTypesFunc();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).catch((function(t){})).finally((function(){t.onUpdated=!1}))}}},f=n(6),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contents"},[n("div",{staticClass:"flex items-center justify-center bg-black bg-opacity-75 h-screen w-screen absolute top-0 left-0 z-50",class:!0===t.isDismissed?"hidden":""},[n("div",{staticClass:"relative flex flex-col bg-white dark:bg-gray-800 overflow-hidden rounded-md shadow-btn-shadow h-full lg:h-5/6 justify-between",class:!0===t.isDismissed?"hidden":"",staticStyle:{width:"584px"}},[n("div",{staticClass:"text-start w-full p-4 sm:px-6 lg:p-8 z-20 pb-0 lg:pb-0 relative"},[n("div",{staticClass:"flex items-center justify-between"},[n("h4",{staticClass:"text-2xl font-medium mb-8 text-sky-550"},[t._v("\n            Éditer le type\n          ")]),t._v(" "),n("button",{staticClass:"ml-auto hover:text-blue-730 p-4 absolute top-2 right-2",on:{click:function(e){e.preventDefault(),t.isDismissed=!0,t.currentStep="first"}}},[n("svg",{staticClass:"w-6 h-6",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"}})])])]),t._v(" "),"congrats"!==t.currentStep?n("p",{staticClass:"text-lg mt-4 text-gray-600"},[t._v("\n          Modifiez les infos du type\n        ")]):t._e(),t._v(" "),"first"===t.currentStep?n("div",{staticClass:"first"},[n("p",{staticClass:"text-base mt-8 text-gray-400"},[t._v("\n            Libellé\n          ")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.appartTypeToEdit.label,expression:"appartTypeToEdit.label"}],staticClass:"w-full h-12 md:h-16 pr-4 pl-4 border-gray-320 focus:border-sky-450 rounded-md bg-gray-100 bg-opacity-50 focus:bg-white focus:ring-0 placeholder-gray-600 focus:placeholder-blue-380 relative",attrs:{type:"text",placeholder:"Libellé"},domProps:{value:t.appartTypeToEdit.label},on:{input:function(e){e.target.composing||t.$set(t.appartTypeToEdit,"label",e.target.value)}}}),t._v(" "),n("p",{staticClass:"text-base mt-8 text-gray-400"},[t._v("\n            Description\n          ")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.appartTypeToEdit.description,expression:"appartTypeToEdit.description"}],staticClass:"w-full h-48 md:h-16 pr-4 pl-4 my-1 border-gray-320 focus:border-sky-450 rounded-md bg-gray-100 bg-opacity-50 focus:bg-white focus:ring-0 placeholder-gray-600 focus:placeholder-blue-380 relative",attrs:{type:"text",placeholder:"Description du type "},domProps:{value:t.appartTypeToEdit.description},on:{input:function(e){e.target.composing||t.$set(t.appartTypeToEdit,"description",e.target.value)}}})]):t._e(),t._v(" "),"congrats"===t.currentStep?n("div",{staticClass:"congrats h-4/5 flex justify-center items-center"},[t._m(0)]):t._e()]),t._v(" "),"congrats"!==t.currentStep?n("div",{staticClass:"footer p-8 flex justify-between absolute w-full bg-white z-20 bottom-0"},[n("button",{staticClass:"w-1/2 py-4 text-sm px-8 leading-none border border-blue-990 font-medium rounded-md text-blue-990 hover:bg-gray-100 mr-4",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.isDismissed=!0}}},[n("span",[t._v("Annuler")])]),t._v(" "),n("button",{staticClass:"relative w-1/2 shadow-btn-shadow border border-transparent py-4 text-sm px-8 leading-none rounded font-medium text-white bg-sky-550 hover:bg-blue-920",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.editAppartType.apply(null,arguments)}}},[t._v("\n          Enregistrer les modifs.\n          "),t.onUpdated?n("loader",{staticClass:"ml-4 absolute top-1/2 right-2 transform -translate-y-1/2"}):t._e()],1)]):n("div",{staticClass:"footer p-8 flex justify-between absolute w-full bg-white z-20 bottom-0"},[n("button",{staticClass:"w-full py-4 text-sm px-8 leading-none border border-blue-990 font-medium rounded-md text-blue-990 hover:bg-gray-100 mr-4",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.isDismissed=!0,t.currentStep="first"}}},[n("span",[t._v("Fermer")])])])])])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"w-full px-16"},[n("img",{staticClass:"success-img mx-auto",attrs:{src:"/assets/images/success.svg",alt:"Logo Long Gontché"}}),t._v(" "),n("p",{staticClass:"text-lg lg:text-3xl -mt-8 lg:mt-12 text-blue-920 text-center"},[t._v("\n              Type\n            ")]),t._v(" "),n("p",{staticClass:"lg:text-xl mt-2 lg:mt-4 text-blue-920 text-center"},[t._v("\n              mis à jour avec succès\n            ")])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{Loader:n(58).default})},557:function(t,e,n){"use strict";n(506)},558:function(t,e,n){var r=n(27)((function(i){return i[1]}));r.push([t.i,"/*purgecss start ignore*/\n.type .action-link{\n  opacity:0\n}\n.type:hover .action-link{\n  opacity:1\n}\n\n/*purgecss end ignore*/",""]),r.locals={},t.exports=r},615:function(t,e,n){"use strict";n.r(e);n(24),n(22),n(30),n(17),n(31);var r=n(10),o=n(7),c=(n(57),n(9),n(20),n(29),n(25));function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={layout:"dashboard",middleware:function(t){var e=t.redirect,n=t.$auth;0!==n.user.userType&&1!==n.user.userType&&e({name:"dashboard-appartements"})},asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$api,(n=t.store).getters["appartment/appartments"].length){e.next=4;break}return e.next=4,n.dispatch("appartment/loadAppartments");case 4:if(n.getters["appartmentType/appartmentTypes"].length){e.next=7;break}return e.next=7,n.dispatch("appartmentType/loadAppartmentTypes");case 7:if(n.getters["account/accounts"].length){e.next=10;break}return e.next=10,n.dispatch("account/loadAccounts");case 10:if(n.getters["reservation/reservations"].length){e.next=13;break}return e.next=13,n.dispatch("reservation/loadReservations");case 13:if(n.getters["publication/publications"].length){e.next=16;break}return e.next=16,n.dispatch("publication/loadPublications");case 16:if(n.getters["visit/visits"].length){e.next=19;break}return e.next=19,n.dispatch("visit/loadVisits");case 19:return e.abrupt("return",{});case 20:case"end":return e.stop()}}),e)})))()},data:function(){return{title:"Publications",appartmentTypeToEdit:{},isListLayout:!0,isFilterTrayOpened:!1,selectedTypes:[],contracts:[],locations:[]}},head:function(){return{title:this.title}},computed:d(d({},Object(c.c)({appartments:"appartment/appartments",appartmentTypes:"appartmentType/appartmentTypes",publications:"publication/publications",reservations:"reservation/reservations",visits:"visit/visits",accounts:"account/accounts"})),{},{publication:function(){var t=this;return function(e){return t.publications.find((function(t){return t.id===e}))}},reservation:function(){var t=this;return function(e){return t.reservations.find((function(t){return t.id===e}))}},visit:function(){var t=this;return function(e){return t.visits.find((function(t){return t.id===e}))}},appartment:function(){var t=this;return function(e){return t.appartments.find((function(t){return t.id===e}))}},appartmentType:function(){var t=this;return function(e){return t.appartmentTypes.find((function(t){return t.id===e}))}},user:function(){var t=this;return function(e){return t.users.find((function(t){return t.id===e}))}},contract:function(){var t=this;return function(e){return t.contracts.find((function(t){return t.id===e}))}},typeAppartments:function(){var t=this;return function(e){return t.appartments.filter((function(t){return t.appartmentType===e}))}}}),methods:d(d({},Object(c.b)({loadAppartmentTypes:"appartmentType/loadAppartmentTypes"})),{},{toDetails:function(t){this.$router.push({path:"/dashboard/appartements/"+t.id})},setToEdition:function(t){this.appartmentTypeToEdit=t},deleteAppartmentType:function(t){var e=this;return this.$api.appartmentTypeService.delete({variables:{appartmentTypeId:t.id}}).then((function(){return e.$api.appartmentTypeService.getAll()})).then(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.data,t.next=3,e.loadAppartmentTypes();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){return console.log(t)}))}})},m=f,v=(n(557),n(6)),component=Object(v.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex-grow px-6 pt-2 main__content"},[n("EditAppartmentType",{attrs:{"appartment-type":t.appartmentTypeToEdit,"load-appartment-types-func":t.loadAppartmentTypes}}),t._v(" "),n("div",{staticClass:"relative flex pt-3 pb-0 border-t border-b border-gray-300"},[n("div",{staticClass:"w-full relative"},[n("input",{staticClass:"h-12 px-10 mt-1 mb-4 block w-full border-gray-200 focus:border-blue-75 bg-gray-100 focus:bg-blue-75 focus:ring-0 placeholder-gray-600 focus:placeholder-blue-380",class:!0===t.isFilterTrayOpened?"rounded-t-md":"rounded-md",attrs:{id:"",type:"text",placeholder:"Recherche"}}),t._v(" "),n("a",{staticClass:"flex items-center h-12 px-3 mt-1 bg-white border border-gray-200 absolute top-0 right-0",class:!0===t.isFilterTrayOpened?"rounded-tr-md":"rounded-r-md",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.isFilterTrayOpened=!t.isFilterTrayOpened}}},[n("span",{staticClass:"ml-3 text-sm font-medium"},[t._v("Filtres")]),t._v(" "),t._m(0)]),t._v(" "),t._m(1)]),t._v(" "),n("div",{staticClass:"grid grid-cols-2 divide-x-2 divide-gray-300"},[n("a",{staticClass:"flex items-center h-12 px-3 mt-1 ml-2 hover:bg-blue-75",class:t.isListLayout?"text-blue-730":"text-gray-400",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.isListLayout=!0}}},[t._m(2)]),t._v(" "),n("a",{staticClass:"flex items-center h-12 px-3 mt-1 hover:bg-blue-75",class:t.isListLayout?"text-gray-400":"text-blue-730",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.isListLayout=!1}}},[t._m(3)])])]),t._v(" "),0===t.appartmentTypes.length?n("div",{staticClass:"flex flex-col w-full h-4/5 items-center justify-center"},[n("h1",{staticClass:"text-3xl font-bold"},[t._v("\n      0 type trouvé\n    ")]),t._v(" "),n("br"),t._v(" "),t._m(4)]):n("div",{staticClass:"flex flex-col w-full table__container"},[t._m(5),t._v(" "),n("div",{staticClass:"overflow-auto custom__scroll py-4"},t._l(t.appartmentTypes,(function(e,r){return n("div",{key:e.id,staticClass:"type flex flex-shrink-0 py-1 text-sm items-center hover:bg-sky-50 relative",class:r%2!=0?"bg-gray-100":""},[n("div",{staticClass:"flex flex-col w-min px-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedTypes,expression:"selectedTypes"}],staticClass:"appearance-none w-6 h-6 border border-gray-300 rounded-sm outline-none cursor-pointer checked:bg-blue-400",attrs:{type:"checkbox",name:"email"},domProps:{value:e,checked:Array.isArray(t.selectedTypes)?t._i(t.selectedTypes,e)>-1:t.selectedTypes},on:{change:function(n){var r=t.selectedTypes,o=n.target,c=!!o.checked;if(Array.isArray(r)){var l=e,d=t._i(r,l);o.checked?d<0&&(t.selectedTypes=r.concat([l])):d>-1&&(t.selectedTypes=r.slice(0,d).concat(r.slice(d+1)))}else t.selectedTypes=c}}})]),t._v(" "),n("div",{staticClass:"flex flex-col w-56 px-2 mx-2"},[n("span",[t._v(t._s(e.label))])]),t._v(" "),n("div",{staticClass:"flex flex-col w-80 h-10 px-2 mx-2"},[n("span",[t._v(t._s(e.description))])]),t._v(" "),n("div",{staticClass:"flex flex-col w-20 px-2 mx-2 text-center"},[n("span",[t._v(t._s(t.typeAppartments(e.id).length))])]),t._v(" "),t._m(6,!0),t._v(" "),n("div",{staticClass:"flex flex-col px-2 mx-2 cursor-pointer action-link",on:{click:function(n){return n.preventDefault(),t.setToEdition(e)}}},[t._m(7,!0)]),t._v(" "),n("DeletePrompt",{attrs:{"delete-placeholder":function(){return t.deleteAppartmentType(e)}}})],1)})),0),t._v(" "),t._m(8)])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon ml-3"},[e("i",{staticClass:"far fa-chevron-down fa-sm"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon w-8 block absolute left-2 top-5 h-9"},[e("i",{staticClass:"far fa-search mx-auto block"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon w-6 block"},[e("i",{staticClass:"far fa-th-list mx-auto block fa-lg"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon w-6 block"},[e("i",{staticClass:"far fa-th-large mx-auto block fa-lg"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"text-gray-400"},[t._v('\n      Cliquez sur le bouton " + Nv. publication" en haut à gauche pour\n      '),n("span",{staticClass:"font-extrabold"},[t._v("créer un type")]),t._v(".\n    ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-shrink-0 bg-blue-75 py-1 font-medium bg-gray-100"},[n("div",{staticClass:"flex items-center w-min h-10 px-2"},[n("input",{staticClass:"appearance-none w-6 h-6 border border-gray-300 rounded-sm outline-none cursor-pointer checked:bg-blue-400",attrs:{type:"checkbox",name:"email"}})]),t._v(" "),n("div",{staticClass:"flex items-center w-56 h-10 px-2 text-xs mx-2"},[n("span",[t._v("TYPE")])]),t._v(" "),n("div",{staticClass:"flex items-center w-80 h-10 px-2 text-xs mx-2"},[n("span",[t._v("DESCRIPTION")])]),t._v(" "),n("div",{staticClass:"flex items-center w-20 h-10 px-2 text-xs mx-2"},[n("span",[t._v("APPART.")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"flex flex-col w-24 h-10 px-2 mx-2"},[e("span")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon"},[e("i",{staticClass:"far fa-edit"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-shrink-0 bg-blue-75 py-1 font-medium bg-gray-100"},[n("div",{staticClass:"flex items-center w-min h-10 px-2"},[n("input",{staticClass:"appearance-none w-6 h-6 border border-gray-300 rounded-sm outline-none cursor-pointer checked:bg-blue-400",attrs:{type:"checkbox",name:"email"}})]),t._v(" "),n("div",{staticClass:"flex items-center w-56 h-10 px-2 text-xs mx-2"},[n("span",[t._v("TYPE")])]),t._v(" "),n("div",{staticClass:"flex items-center w-80 h-10 px-2 text-xs mx-2"},[n("span",[t._v("DESCRIPTION")])]),t._v(" "),n("div",{staticClass:"flex items-center w-20 h-10 px-2 text-xs mx-2"},[n("span",[t._v("APPART.")])])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{EditAppartmentType:n(530).default,DeletePrompt:n(468).default})}}]);