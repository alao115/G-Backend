(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{529:function(t,e,r){"use strict";r.r(e);r(24),r(22),r(30),r(31);var n=r(7),o=r(72),l=r(10);r(33),r(57),r(9),r(20),r(17),r(70),r(29);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={props:{reservation:{type:Object,default:function(){return{}}},isMinified:{type:Boolean,default:!1},loadReservationsFunc:{type:Function,required:!0},appartmentsProp:{type:Array,default:function(){return[]},required:!0},appartmentTypes:{type:Array,default:function(){return[]},required:!0}},data:function(){return{selectedType:"",reservationToEdit:d({},this.reservation),typeSelectIsOpen:!1,currentStep:"first",isDismissed:!0,contracts:[],appartments:Object(o.a)(this.appartmentsProp),locations:[],selectedAppart:"",onUpdated:!1}},fetch:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.appartmentService.getAll();case 2:t.appartments=e.sent.data.appartments;case 3:case"end":return e.stop()}}),e)})))()},computed:{routeName:function(){return this.$nuxt.$route.name},appartment:function(){var t=this;return function(e){return t.appartments.find((function(t){return t.id===e}))}},appartmentType:function(){var t=this;return function(e){return t.appartmentTypes.find((function(t){return t.id===e}))}},user:function(){var t=this;return function(e){return t.users.find((function(t){return t.id===e}))}},contract:function(){var t=this;return function(e){return t.contracts.find((function(t){return t.id===e}))}},typeAppartments:function(){var t=this;return function(e){return t.appartments.filter((function(t){return t.appartmentType===e}))}},listOfTypes:function(){var t=this,e=[];return this.appartmentTypes.forEach((function(r){t.typeAppartments(r.id).length>0&&e.push(r)})),e}},watch:{isDismissed:function(t){},selectedType:function(t){""!==t&&(this.appartments=this.appartments.filter((function(e){return e.appartmentType===t.id})))},reservation:function(t){null!==t&&(this.reservationToEdit=d({},t),this.isDismissed=!1)}},created:function(){this.reserrvationToEdit=d({},this.reservation)},methods:{editReservation:function(){var t=this;this.onUpdated=!0,this.reservationToEdit.appartment=this.reservationToEdit.appartment.id,this.reservationToEdit.user=this.reservationToEdit.user.id,this.reservationToEdit.date=new Date(this.reservationToEdit.date).valueOf().toString(),this.$api.reservationService.update({variables:{reservationId:this.reservation.id,data:this.reservationToEdit}}).then(function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.reservationToEdit={},t.currentStep="congrats",e.next=4,t.loadReservationsFunc();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.errorToshow=e})).finally((function(){t.onUpdated=!1}))}}},m=f,v=r(6),component=Object(v.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"contents"},[r("div",{staticClass:"flex items-center justify-center bg-black bg-opacity-75 h-screen w-screen absolute top-0 left-0 z-50",class:!0===t.isDismissed?"hidden":""},[r("div",{staticClass:"relative bg-white dark:bg-gray-800 overflow-hidden rounded-md shadow-btn-shadow mx-auto h-full lg:h-5/6",staticStyle:{width:"584px"}},[r("div",{staticClass:"text-start w-full p-4 sm:px-6 lg:p-8 z-20 relative"},[r("div",{staticClass:"flex items-center justify-between"},[r("h4",{staticClass:"text-2xl font-medium mb-8 text-sky-550"},[t._v("\n            Modifier une réservation\n          ")]),t._v(" "),r("button",{staticClass:"ml-auto hover:text-blue-730 p-4 absolute top-2 right-2",on:{click:function(e){e.preventDefault(),t.isDismissed=!0}}},[r("svg",{staticClass:"w-6 h-6",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"}},[r("path",{attrs:{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"}})])])]),t._v(" "),"first"===t.currentStep?r("div",{staticClass:"relative"},[r("p",{staticClass:"text-base mt-4 text-gray-400"},[t._v("\n            Veuillez sélectionner un appartement à réserver\n          ")]),t._v(" "),r("div",{staticClass:"relative inline-block w-full text-gray-700"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.reservationToEdit.appartment,expression:"reservationToEdit.appartment"}],staticClass:"w-full h-12 md:h-16 my-4 pl-3 pr-6 text-base placeholder-gray-600 border rounded-lg appearance-none focus:shadow-outline",attrs:{placeholder:"Regular input"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.reservationToEdit,"appartment",e.target.multiple?r:r[0])}}},t._l(t.appartments,(function(e){return r("option",{key:e.id,domProps:{value:e.id}},[r("span",[t._v(t._s(t.appartmentType(e.appartmentType)&&t.appartmentType(e.appartmentType).label))]),t._v(" "),r("span",{staticClass:"text-gray-400"},[t._v(t._s(e.bedrooms+" Chambres - "+e.livingrooms+" Salons"))])])})),0)]),t._v(" "),r("div",{staticClass:"flex space-x-8"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.reservationToEdit.user,expression:"reservationToEdit.user"}],staticClass:"h-12 md:h-16 px-8 mt-1 mb-4 block w-full border-gray-320 focus:border-sky-450 rounded-md bg-gray-100 focus:bg-white focus:ring-0 placeholder-gray-600 focus:placeholder-blue-380",attrs:{type:"text",placeholder:"Nom"},domProps:{value:t.reservationToEdit.user},on:{input:function(e){e.target.composing||t.$set(t.reservationToEdit,"user",e.target.value)}}}),t._v(" "),r("input",{staticClass:"h-12 md:h-16 px-8 mt-1 mb-4 block w-full border-gray-320 focus:border-sky-450 rounded-md bg-gray-100 focus:bg-white focus:ring-0 placeholder-gray-600 focus:placeholder-blue-380",attrs:{type:"text",placeholder:"Prénom(s)"}})]),t._v(" "),t._m(0),t._v(" "),r("div",{staticClass:"flex space-x-8"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.reservationToEdit.date,expression:"reservationToEdit.date"}],staticClass:"mt-4 h-12 md:h-16 px-8 mb-4 block w-1/2 border-gray-320 focus:border-sky-450 rounded-md bg-gray-100 focus:bg-white focus:ring-0 placeholder-gray-600 focus:placeholder-blue-380",attrs:{type:"date",placeholder:"Date"},domProps:{value:t.reservationToEdit.date},on:{input:function(e){e.target.composing||t.$set(t.reservationToEdit,"date",e.target.value)}}}),t._v(" "),r("input",{staticClass:"h-12 md:h-16 px-8 mt-4 mb-4 block w-1/2 border-gray-320 focus:border-sky-450 rounded-md bg-gray-100 focus:bg-white focus:ring-0 placeholder-gray-600 focus:placeholder-blue-380",attrs:{type:"time",placeholder:"Heure"}})])]):t._e(),t._v(" "),"congrats"===t.currentStep?r("div",{staticClass:"congrats h-4/5 flex justify-center items-center"},[t._m(1)]):t._e()]),t._v(" "),"congrats"!==t.currentStep?r("div",{staticClass:"footer p-8 flex justify-between absolute w-full bg-white z-20 bottom-0"},[r("button",{staticClass:"w-1/2 py-4 text-lg px-10 leading-none border border-blue-990 font-medium rounded-md text-blue-990 hover:bg-gray-100 mr-4 mt-8",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.isDismissed=!0}}},[t._v("\n          Annuler\n        ")]),t._v(" "),r("button",{staticClass:"relative w-1/2 shadow-btn-shadow border border-transparent py-4 text-lg px-10 leading-none rounded font-medium mt-8 text-white bg-sky-550 hover:bg-blue-920",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.editReservation.apply(null,arguments)}}},[t._v("\n          Envoyer\n          "),t.onUpdated?r("loader",{staticClass:"absolute top-1/2 right-2 transform -translate-y-1/2"}):t._e()],1)]):r("div",{staticClass:"footer p-8 flex justify-between absolute w-full bg-white z-20 bottom-0"},[r("button",{staticClass:"w-full py-4 text-sm px-8 leading-none border border-blue-990 font-medium rounded-md text-blue-990 hover:bg-gray-100 mr-4",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.isDismissed=!0,t.currentStep="first"}}},[r("span",[t._v("Fermer")])])])])])])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"flex space-x-8"},[r("input",{staticClass:"mt-4 h-12 md:h-16 px-8 mb-4 block w-full border-gray-320 focus:border-sky-450 rounded-md bg-gray-100 focus:bg-white focus:ring-0 placeholder-gray-600 focus:placeholder-blue-380",attrs:{type:"text",placeholder:"Téléphone"}}),t._v(" "),r("input",{staticClass:"mt-4 h-12 md:h-16 px-8 mb-4 block w-full border-gray-320 focus:border-sky-450 rounded-md bg-gray-100 focus:bg-white focus:ring-0 placeholder-gray-600 focus:placeholder-blue-380",attrs:{type:"email",placeholder:"Email"}})])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"w-full px-16"},[r("img",{staticClass:"success-img mx-auto",attrs:{src:"/assets/images/success.svg",alt:"Logo Long Gontché"}}),t._v(" "),r("p",{staticClass:"text-lg lg:text-3xl -mt-8 lg:mt-12 text-blue-920 text-center"},[t._v("\n              Réservation\n            ")]),t._v(" "),r("p",{staticClass:"lg:text-xl mt-2 lg:mt-4 text-blue-920 text-center"},[t._v("\n              mise à jour avec succès\n            ")])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{Loader:r(58).default})}}]);